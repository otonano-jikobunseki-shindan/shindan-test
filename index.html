<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="robots" content="noindex,nofollow" />
  <title>é–‹ãæ–¹ã®ã”æ¡ˆå†…</title>

  <style>
  :root{
    /* quiz.html ã¨åŒç³»çµ±ï¼ˆæ¸©ã‹ã„é…è‰²ï¼‰ */
    --bg1:#fff7ef;
    --bg2:#fff1f6;

    --card:#ffffffcc;
    --text:#2b2b2b;
    --muted:#6b7280;

    --accent:#ff7a59;   /* ã‚³ãƒ¼ãƒ©ãƒ« */
    --accent2:#34d399;  /* ã‚„ã•ã—ã„ã‚°ãƒªãƒ¼ãƒ³ */
    --line:#f1d7c8;

    --shadow: 0 10px 30px rgba(20,10,5,.08);
    --shadow2: 0 6px 18px rgba(20,10,5,.06);

    --radius: 18px;
    --radius2: 14px;
  }

  *{box-sizing:border-box}

  body{
    margin:0;
    font-family: ui-rounded, system-ui, -apple-system, "Segoe UI", Roboto,
      "Hiragino Maru Gothic ProN", "Hiragino Kaku Gothic ProN", "Noto Sans JP",
      "Yu Gothic", sans-serif;
    color: var(--text);
    background: radial-gradient(1200px 700px at 20% 10%, var(--bg2), transparent 60%),
                radial-gradient(1200px 700px at 80% 0%, #fffbe6, transparent 55%),
                linear-gradient(180deg, var(--bg1), #ffffff);
    min-height: 100vh;
  }

  .wrap{
    min-height:100vh;
    display:grid;
    place-items:center;
    padding:22px;
  }

  .card{
    width:min(560px,100%);
    background:rgba(255,255,255,.78);
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    backdrop-filter: blur(10px);
    padding:18px 18px 16px;
    text-align:left;
  }

  .title{
    display:flex;
    align-items:center;
    gap:10px;
    margin:0 0 10px 0;
    font-weight:900;
    font-size:18px;
  }

  .badge{
    width:34px;height:34px;
    border-radius:12px;
    display:grid;place-items:center;
    background: linear-gradient(135deg, #ffdfd5, #ffe6f0);
    border:1px solid var(--line);
    box-shadow:var(--shadow2);
    font-size:18px;
  }

  .msg{
    margin:0 0 14px 0;
    color:var(--muted);
    line-height:1.75;
    font-size:14.5px;
  }

  .btn{
    width:100%;
    border-radius:var(--radius2);
    padding:13px 14px;
    border:1px solid #f3d2c2;
    font-size:16px;
    cursor:pointer;
    user-select:none;
    font-weight:900;
    transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease, filter .12s ease;
    box-shadow: 0 4px 12px rgba(20,10,5,.06);
    background:#fff;
    color:var(--text);
  }
  .btn:active{transform: translateY(1px);}

  /* quiz.html ã® primary ã¨åŒã˜ãƒãƒªã®ã‚°ãƒ©ãƒ‡ï¼ˆã‚³ãƒ¼ãƒ©ãƒ«ç³»ï¼‰ */
  .btnPrimary{
    background: linear-gradient(90deg, #ff8a6b, #ff6b8a);
    border-color: transparent;
    color:#fff;
    box-shadow: 0 14px 26px rgba(255, 107, 138, 0.18);
  }
  .btnPrimary:hover{filter: brightness(1.02);}

  /* ã‚µãƒ–ãƒœã‚¿ãƒ³ã¯ quiz ã®é€šå¸¸ãƒœã‚¿ãƒ³å¯„ã›ï¼ˆç™½ï¼‹æ ï¼‹å½±ï¼‰ */
  .btnSub{
    margin-top:10px;
    background:#fff;
    color:var(--text);
    border:1px solid #f3d2c2;
    box-shadow: 0 8px 18px rgba(20,10,5,.08);
    font-weight:800;
  }

  .toast{
    position:fixed;
    left:50%;bottom:16px;
    transform:translateX(-50%);
    background: rgba(255,255,255,0.92);
    color:var(--text);
    border:1px solid var(--line);
    border-radius:12px;
    padding:10px 12px;
    box-shadow: var(--shadow);
    display:none;
    font-size:13px;
  }

  @media (max-width:420px){
    .card{padding:16px 14px 14px;}
    .msg{font-size:14px;}
    .btn{font-size:15.5px;}
  }
</style>



</head>

<body>
<script>
  // â˜…æ¯å›ã“ã“ã ã‘æ›´æ–°ï¼šGeminiå…±æœ‰URL
  const TARGET_URL = "https://otonano-jikobunseki-shindan.github.io/shindan-test/quiz.html";

  const ua = navigator.userAgent || "";

  // ---- åˆ¤å®šæ–¹é‡ ----
  // PCï¼šå…¨éƒ¨OKï¼ˆå³Geminiã¸ï¼‰
  // ã‚¹ãƒãƒ›ï¼šè¨±å¯ã™ã‚‹ã®ã¯ä»¥ä¸‹ã®ã¿
  //   - iOS Safari
  //   - iOS Chromeï¼ˆCriOSï¼‰
  //   - Android Chromeï¼ˆãŸã ã—WebView/LINEã‚’é™¤å¤–ï¼‰
  // ãã‚Œä»¥å¤–ï¼šæ¡ˆå†…ç”»é¢

  const isMobile = /Android|iPhone|iPad|iPod/i.test(ua);
  const isIOS = /iPhone|iPad|iPod/i.test(ua);
  const isAndroid = /Android/i.test(ua);

  // ã‚¢ãƒ—ãƒªå†…ãƒ–ãƒ©ã‚¦ã‚¶/åŸ‹ã‚è¾¼ã¿WebViewã®å¼·ã„ã‚·ã‚°ãƒŠãƒ«ï¼ˆå…¥ã£ã¦ãŸã‚‰å¼¾ãï¼‰
  const isInAppStrong =
    /Line\//i.test(ua) ||            // LINEå†…ãƒ–ãƒ©ã‚¦ã‚¶
    /;\s*wv\)/i.test(ua) ||          // Android WebViewã®å°
    /Version\/4\.0/i.test(ua);       // Android WebViewã§ã‚ã‚ŠãŒã¡

  // iOS Safari åˆ¤å®šï¼šSafariã‚’å«ã¿ã€ä»–ãƒ–ãƒ©ã‚¦ã‚¶å°ãŒãªã„
  const isSafari =
    isIOS &&
    /Safari/i.test(ua) &&
    !/CriOS|FxiOS|EdgiOS|OPiOS|GSA|Line\//i.test(ua);

  // iOS Chrome åˆ¤å®š
  const isChromeIOS = isIOS && /CriOS/i.test(ua);

  // Android Chrome åˆ¤å®šï¼šChrome/Chromium ã‚’å«ã¿ã€ã‹ã¤ WebView/LINE ã§ã¯ãªã„
  const isChromeAndroid =
    isAndroid &&
    /Chrome\/|Chromium\//i.test(ua) &&
    !/Edg|OPR|SamsungBrowser/i.test(ua) &&
    !isInAppStrong;

  const allowOnMobile = (isSafari || isChromeIOS || isChromeAndroid);

  function toast(msg){
    const el = document.getElementById("toast");
    el.textContent = msg;
    el.style.display = "block";
    clearTimeout(window.__t);
    window.__t = setTimeout(()=> el.style.display="none", 1700);
  }

  function makeChromeIntent(url){
    // Androidå‘ã‘ï¼šChrome intentï¼ˆç«¯æœ«/ã‚¢ãƒ—ãƒªå´ã§ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚‹ï¼‰
    const u = new URL(url);
    const fallback = encodeURIComponent(url);
    return `intent://${u.host}${u.pathname}${u.search}#Intent;scheme=https;package=com.android.chrome;S.browser_fallback_url=${fallback};end`;
  }

  async function copyLink(){
    try{
      await navigator.clipboard.writeText(TARGET_URL);
      toast("ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
    }catch(e){
      const ta=document.createElement("textarea");
      ta.value=TARGET_URL; document.body.appendChild(ta);
      ta.select(); document.execCommand("copy"); document.body.removeChild(ta);
      toast("ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
    }
  }

  function openExternal(){
    if (isAndroid) {
      // Androidã¯Chromeèµ·å‹•ã‚’è©¦ã¿ã‚‹ï¼ˆãƒ–ãƒ­ãƒƒã‚¯æ™‚ã¯ã‚³ãƒ”ãƒ¼ã§é€ƒã’ã‚‹ï¼‰
      location.href = makeChromeIntent(TARGET_URL);
      return;
    }
    // iOSã¯å¼·åˆ¶ä¸å¯ãªã®ã§ã€æ–°è¦ã‚¿ãƒ–ã‚’è©¦ã™ï¼ˆã ã‚ã§ã‚‚ã‚³ãƒ”ãƒ¼ã§OKï¼‰
    window.open(TARGET_URL, "_blank", "noopener,noreferrer");
  }

  // âœ… ãƒ«ãƒ¼ãƒ«é©ç”¨
  if (!isMobile) {
    // PCã¯å…¨éƒ¨OK
    location.replace(TARGET_URL);
  } else if (allowOnMobile) {
    // ã‚¹ãƒãƒ›ã§ã‚‚è¨±å¯ã•ã‚ŒãŸãƒ–ãƒ©ã‚¦ã‚¶ã¯OK
    location.replace(TARGET_URL);
  } else {
    // æ¡ˆå†…ç”»é¢è¡¨ç¤ºï¼ˆã“ã“ã«ç•™ã¾ã‚‹ï¼‰
    window.__APP__ = { openExternal, copyLink };
  }
</script>

<div class="wrap">
  <div class="card">
    <div class="title">
      <div class="badge">ğŸŒ·</div>
      é–‹ãæ–¹ã®ã”æ¡ˆå†…
    </div>

    <p class="msg">
      ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ã†ã¾ãå‹•ä½œã—ãªã„ãŸã‚ã€<br>
      Chromeã‹Safariã®ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ãã ã•ã„ğŸ’¦<br><br>
      ä¸‹ã®ãƒœã‚¿ãƒ³ã‹ã‚‰ç§»å‹•ã™ã‚‹ã‹ã€<br>
      URLã‚’ã‚³ãƒ”ãƒšã—ã¦ãŠæ¥½ã—ã¿ãã ã•ã„ï¼
    </p>

    <button class="btn btnPrimary" onclick="__APP__.openExternal()">
      å¤–éƒ¨ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
    </button>

    <button class="btn btnSub" onclick="__APP__.copyLink()">
      ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼
    </button>
  </div>
</div>

<div class="toast" id="toast"></div>
</body>
</html>
