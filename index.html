<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="robots" content="noindex,nofollow" />
  <title>開き方のご案内</title>

  <style>
  :root{
    /* quiz.html と同系統（温かい配色） */
    --bg1:#fff7ef;
    --bg2:#fff1f6;

    --card:#ffffffcc;
    --text:#2b2b2b;
    --muted:#6b7280;

    --accent:#ff7a59;   /* コーラル */
    --accent2:#34d399;  /* やさしいグリーン */
    --line:#f1d7c8;

    --shadow: 0 10px 30px rgba(20,10,5,.08);
    --shadow2: 0 6px 18px rgba(20,10,5,.06);

    --radius: 18px;
    --radius2: 14px;
  }

  *{box-sizing:border-box}

  body{
    margin:0;
    font-family: ui-rounded, system-ui, -apple-system, "Segoe UI", Roboto,
      "Hiragino Maru Gothic ProN", "Hiragino Kaku Gothic ProN", "Noto Sans JP",
      "Yu Gothic", sans-serif;
    color: var(--text);
    background: radial-gradient(1200px 700px at 20% 10%, var(--bg2), transparent 60%),
                radial-gradient(1200px 700px at 80% 0%, #fffbe6, transparent 55%),
                linear-gradient(180deg, var(--bg1), #ffffff);
    min-height: 100vh;
  }

  .wrap{
    min-height:100vh;
    display:grid;
    place-items:center;
    padding:22px;
  }

  .card{
    width:min(560px,100%);
    background:rgba(255,255,255,.78);
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    backdrop-filter: blur(10px);
    padding:18px 18px 16px;
    text-align:center;
  }

  .title{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    margin:0 0 10px 0;
    font-weight:900;
    font-size:18px;
    text-align:center; 
  }

  .badge{
    width:34px;height:34px;
    border-radius:12px;
    display:grid;place-items:center;
    background: linear-gradient(135deg, #ffdfd5, #ffe6f0);
    border:1px solid var(--line);
    box-shadow:var(--shadow2);
    font-size:18px;
  }

  .msg{
    margin:0 0 14px 0;
    color:var(--muted);
    line-height:1.75;
    font-size:14.5px;
  }

  .btn{
    width:100%;
    border-radius:var(--radius2);
    padding:13px 14px;
    border:1px solid #f3d2c2;
    font-size:16px;
    cursor:pointer;
    user-select:none;
    font-weight:900;
    transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease, filter .12s ease;
    box-shadow: 0 4px 12px rgba(20,10,5,.06);
    background:#fff;
    color:var(--text);
  }
  .btn:active{transform: translateY(1px);}

  /* quiz.html の primary と同じノリのグラデ（コーラル系） */
  .btnPrimary{
    background: linear-gradient(90deg, #ff8a6b, #ff6b8a);
    border-color: transparent;
    color:#fff;
    box-shadow: 0 14px 26px rgba(255, 107, 138, 0.18);
  }
  .btnPrimary:hover{filter: brightness(1.02);}

  /* サブボタンは quiz の通常ボタン寄せ（白＋枠＋影） */
  .btnSub{
    margin-top:10px;
    background:#fff;
    color:var(--text);
    border:1px solid #f3d2c2;
    box-shadow: 0 8px 18px rgba(20,10,5,.08);
    font-weight:800;
  }

  .toast{
    position:fixed;
    left:50%;bottom:16px;
    transform:translateX(-50%);
    background: rgba(255,255,255,0.92);
    color:var(--text);
    border:1px solid var(--line);
    border-radius:12px;
    padding:10px 12px;
    box-shadow: var(--shadow);
    display:none;
    font-size:13px;
  }

  @media (max-width:420px){
    .card{padding:16px 14px 14px;}
    .msg{font-size:14px;}
    .btn{font-size:15.5px;}
  }
    /* ===== 流れる帯（上・下） ===== */
.marquee{
  width:min(560px,100%);
  position: relative;
  overflow: hidden;
  border-radius: var(--radius);
  filter: drop-shadow(0 8px 18px rgba(20,10,5,.06));
  margin: 10px auto;
}

/* 透明感のある背景（カードの世界観に合わせる） */
.marquee::before{
  content:"";
  position:absolute; inset:0;
  background: rgba(255,255,255,.45);
  border:1px solid var(--line);
  border-radius: var(--radius);
  z-index:0;
}

/* 端がスッと消えるフェード */
.marquee::after{
  content:"";
  position:absolute; inset:0;
  border-radius: var(--radius);
  z-index:2;
  pointer-events:none;
  background: linear-gradient(90deg,
    rgba(255,255,255,.95) 0%,
    rgba(255,255,255,0) 12%,
    rgba(255,255,255,0) 88%,
    rgba(255,255,255,.95) 100%
  );
}

.marqueeTrack{
  position: relative;
  z-index:1;
  display:flex;
  gap:12px;
  align-items:center;
  padding:10px 12px;
  width:max-content;
  animation: marqueeLeft var(--speed, 45s) linear infinite;
}

.marquee img{
  height:44px;           /* 好みで調整 */
  width:auto;
  border-radius:12px;
  background:#fff;
  border:1px solid rgba(241,215,200,.9);
  box-shadow: 0 6px 12px rgba(20,10,5,.06);
}

/* 右→左に流す */
@keyframes marqueeLeft{
  0%   { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

/* スマホは少し小さく */
@media (max-width:420px){
  .marquee img{ height:38px; }
}

</style>



</head>

<body>
<script>
  // ★毎回ここだけ更新：Gemini共有URL
  const TARGET_URL = "https://otonano-jikobunseki-shindan.github.io/shindan-test/quiz.html";

  const ua = navigator.userAgent || "";

  // ---- 判定方針 ----
  // PC：全部OK（即Geminiへ）
  // スマホ：許可するのは以下のみ
  //   - iOS Safari
  //   - iOS Chrome（CriOS）
  //   - Android Chrome（ただしWebView/LINEを除外）
  // それ以外：案内画面

  const isMobile = /Android|iPhone|iPad|iPod/i.test(ua);
  const isIOS = /iPhone|iPad|iPod/i.test(ua);
  const isAndroid = /Android/i.test(ua);

  // アプリ内ブラウザ/埋め込みWebViewの強いシグナル（入ってたら弾く）
  const isInAppStrong =
    /Line\//i.test(ua) ||            // LINE内ブラウザ
    /;\s*wv\)/i.test(ua) ||          // Android WebViewの印
    /Version\/4\.0/i.test(ua);       // Android WebViewでありがち

  // iOS Safari 判定：Safariを含み、他ブラウザ印がない
  const isSafari =
    isIOS &&
    /Safari/i.test(ua) &&
    !/CriOS|FxiOS|EdgiOS|OPiOS|GSA|Line\//i.test(ua);

  // iOS Chrome 判定
  const isChromeIOS = isIOS && /CriOS/i.test(ua);

  // Android Chrome 判定：Chrome/Chromium を含み、かつ WebView/LINE ではない
  const isChromeAndroid =
    isAndroid &&
    /Chrome\/|Chromium\//i.test(ua) &&
    !/Edg|OPR|SamsungBrowser/i.test(ua) &&
    !isInAppStrong;

  const allowOnMobile = (isSafari || isChromeIOS || isChromeAndroid);

  function toast(msg){
    const el = document.getElementById("toast");
    el.textContent = msg;
    el.style.display = "block";
    clearTimeout(window.__t);
    window.__t = setTimeout(()=> el.style.display="none", 1700);
  }

  function makeChromeIntent(url){
    // Android向け：Chrome intent（端末/アプリ側でブロックされることもある）
    const u = new URL(url);
    const fallback = encodeURIComponent(url);
    return `intent://${u.host}${u.pathname}${u.search}#Intent;scheme=https;package=com.android.chrome;S.browser_fallback_url=${fallback};end`;
  }

  async function copyLink(){
    try{
      await navigator.clipboard.writeText(TARGET_URL);
      toast("リンクをコピーしました！");
    }catch(e){
      const ta=document.createElement("textarea");
      ta.value=TARGET_URL; document.body.appendChild(ta);
      ta.select(); document.execCommand("copy"); document.body.removeChild(ta);
      toast("リンクをコピーしました！");
    }
  }

  function openExternal(){
    if (isAndroid) {
      // AndroidはChrome起動を試みる（ブロック時はコピーで逃げる）
      location.href = makeChromeIntent(TARGET_URL);
      return;
    }
    // iOSは強制不可なので、新規タブを試す（だめでもコピーでOK）
    window.open(TARGET_URL, "_blank", "noopener,noreferrer");
  }

  // ✅ ルール適用
  if (!isMobile) {
    // PCは全部OK
    location.replace(TARGET_URL);
  } else if (allowOnMobile) {
    // スマホでも許可されたブラウザはOK
    location.replace(TARGET_URL);
  } else {
    // 案内画面表示（ここに留まる）
    window.__APP__ = { openExternal, copyLink };
  }
</script>

<div class="wrap">
  
  <!-- 上：1.png～20.png（右→左） -->
  <div class="marquee" aria-hidden="true">
    <div class="marqueeTrack" style="--speed:55s">
      <!-- 1周目 -->
      <img src="assets/illust/assets/illust/1.png" alt=""><img src="assets/illust/2.png" alt=""><img src="assets/illust/3.png" alt=""><img src="assets/illust/4.png" alt=""><img src="assets/illust/5.png" alt="">
      <img src="assets/illust/6.png" alt=""><img src="assets/illust/7.png" alt=""><img src="assets/illust/8.png" alt=""><img src="assets/illust/9.png" alt=""><img src="assets/illust/10.png" alt="">
      <img src="assets/illust/11.png" alt=""><img src="assets/illust/12.png" alt=""><img src="assets/illust/13.png" alt=""><img src="assets/illust/14.png" alt=""><img src="assets/illust/15.png" alt="">
      <img src="assets/illust/16.png" alt=""><img src="assets/illust/17.png" alt=""><img src="assets/illust/18.png" alt=""><img src="assets/illust/19.png" alt=""><img src="assets/illust/20.png" alt="">
      <!-- 2周目（同じ並びをもう1回） -->
      <img src="assets/illust/1.png" alt=""><img src="assets/illust/2.png" alt=""><img src="assets/illust/3.png" alt=""><img src="assets/illust/4.png" alt=""><img src="assets/illust/5.png" alt="">
      <img src="assets/illust/6.png" alt=""><img src="assets/illust/7.png" alt=""><img src="assets/illust/8.png" alt=""><img src="assets/illust/9.png" alt=""><img src="assets/illust/10.png" alt="">
      <img src="assets/illust/11.png" alt=""><img src="assets/illust/12.png" alt=""><img src="assets/illust/13.png" alt=""><img src="assets/illust/14.png" alt=""><img src="assets/illust/15.png" alt="">
      <img src="assets/illust/16.png" alt=""><img src="assets/illust/17.png" alt=""><img src="assets/illust/18.png" alt=""><img src="assets/illust/19.png" alt=""><img src="assets/illust/20.png" alt="">
    </div>
  </div>

  <div class="card">
    <div class="title">
      大人の診断テスト！✨
    </div>

    <p class="msg">
      あなたも気づいていない<br>
      あなたに出会えるかも…<br><br>
      さぁ！始めましょう！✨<br><br>
      下のボタンを押すと、ChromeかSafariで開きます！
    </p>

    <button class="btn btnPrimary" onclick="__APP__.openExternal()">
      診断スタート！！
    </button>

  </div>
  
  <!-- 下：21.png～40.png（右→左） -->
  <div class="marquee" aria-hidden="true">
    <div class="marqueeTrack" style="--speed:65s">
      <!-- 1周目 -->
      <img src="assets/illust/21.png" alt=""><img src="assets/illust/22.png" alt=""><img src="assets/illust/23.png" alt=""><img src="assets/illust/24.png" alt=""><img src="assets/illust/25.png" alt="">
      <img src="assets/illust/26.png" alt=""><img src="assets/illust/27.png" alt=""><img src="assets/illust/28.png" alt=""><img src="assets/illust/29.png" alt=""><img src="assets/illust/30.png" alt="">
      <img src="assets/illust/31.png" alt=""><img src="assets/illust/32.png" alt=""><img src="assets/illust/33.png" alt=""><img src="assets/illust/34.png" alt=""><img src="assets/illust/35.png" alt="">
      <img src="assets/illust/36.png" alt=""><img src="assets/illust/37.png" alt=""><img src="assets/illust/38.png" alt=""><img src="assets/illust/39.png" alt=""><img src="assets/illust/40.png" alt="">
      <!-- 2周目 -->
      <img src="assets/illust/21.png" alt=""><img src="assets/illust/22.png" alt=""><img src="assets/illust/23.png" alt=""><img src="assets/illust/24.png" alt=""><img src="assets/illust/25.png" alt="">
      <img src="assets/illust/26.png" alt=""><img src="assets/illust/27.png" alt=""><img src="assets/illust/28.png" alt=""><img src="assets/illust/29.png" alt=""><img src="assets/illust/30.png" alt="">
      <img src="assets/illust/31.png" alt=""><img src="assets/illust/32.png" alt=""><img src="assets/illust/33.png" alt=""><img src="assets/illust/34.png" alt=""><img src="assets/illust/35.png" alt="">
      <img src="assets/illust/36.png" alt=""><img src="assets/illust/37.png" alt=""><img src="assets/illust/38.png" alt=""><img src="assets/illust/39.png" alt=""><img src="assets/illust/40.png" alt="">
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>
</body>
</html>
